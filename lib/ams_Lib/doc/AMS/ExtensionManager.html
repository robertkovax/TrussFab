<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: AMS::ExtensionManager
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/custom.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "AMS::ExtensionManager";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../AMS.html" title="AMS (module)">AMS</a></span></span>
     &raquo; 
    <span class="title">ExtensionManager</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: AMS::ExtensionManager
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">AMS::ExtensionManager</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>RubyExtension/ams_Lib/extension_manager.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An extension manager for copying, loading, and removing dynamic linked
libraries, C extensions, and rubies (credit to ThomThom).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_c_extension-instance_method" title="#add_c_extension (instance method)">#<strong>add_c_extension</strong>(filename)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a C extension file that must be copied/loaded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_optional_library-instance_method" title="#add_optional_library (instance method)">#<strong>add_optional_library</strong>(filename)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a library file that will be copied/loaded in case it&#39;s there.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_required_library-instance_method" title="#add_required_library (instance method)">#<strong>add_required_library</strong>(filename)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a library file that must be copied/loaded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_ruby-instance_method" title="#add_ruby (instance method)">#<strong>add_ruby</strong>(filename, only_register = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a Ruby file that will be required and ignored from cleanup.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_ruby_no_require-instance_method" title="#add_ruby_no_require (instance method)">#<strong>add_ruby_no_require</strong>(filename)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a Ruby file that will be ignored from cleanup but not required.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clean_up-instance_method" title="#clean_up (instance method)">#<strong>clean_up</strong>(clean_rubies = false)  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Erase all unused libraries, c extension files, and unregistered ruby files
(if <code>clean_rubies</code> is enabled).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(ext_path, ext_version, experimental = false)  &#x21d2; ExtensionManager </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Apply a staging technique to the dynamically linked libraries, to avoid
experiencing overwrite issues that occur when attempting to update the
extension while it&#39;s loaded.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#require_all-instance_method" title="#require_all (instance method)">#<strong>require_all</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Copy and load all the required and optional files.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(ext_path, ext_version, experimental = false)  &#x21d2; <tt><span class='object_link'><a href="" title="AMS::ExtensionManager (class)">ExtensionManager</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>When the libraries are copied, they are obtained from
<em>EXT_PATH/libraries/stage/</em>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>When the libraries are loaded, they are obtained from
<em>EXT_PATH/libraries/VERSION/</em> or
<em>TEMP_EXT_PATH/libraries/VERSION/</em>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>Rubies are loaded from <em>EXT_PATH</em>.</p>
</div>
  </div>


<p>Apply a staging technique to the dynamically linked libraries, to avoid
experiencing overwrite issues that occur when attempting to update the
extension while it&#39;s loaded.</p>
<ol><li>
<p>The files within <em>EXT_PATH/libraries/stage/</em> folder are used as
resources for copying and are not loaded. These files are the ones that get
overwritten when the extension is updated.</p>
</li><li>
<p>Unless already created, we create an additional version-specific folder
within <em>EXT_PATH/libraries/</em> and copy all the necessary stage
resources into the folder. The libraries within the version-specific folder
are the ones that get loaded.</p>
</li><li>
<p>In case the extension is installed outside the user directory, where the
file permissions are limited, the necessary stage resources are copied into
a TEMP folder and are loaded from there.</p>
</li><li>
<p>An optional clean-up method removes outdated version-specific folders, and
unregistered rubies, for the purpose of keeping the library clean.</p>
</li></ol>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span>
<span class='id identifier rubyid_base'>base</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_basename'>basename</span><span class='lparen'>(</span><span class='kw'>__FILE__</span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../AMS.html" title="AMS (module)">AMS</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="AMS::ExtensionManager (class)">ExtensionManager</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.2.3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_add_c_extension'>add_c_extension</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>my_lib</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_add_ruby'>add_ruby</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>some_ruby_file_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_add_ruby'>add_ruby</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>some_other_ruby_file_name</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_add_ruby_no_require'>add_ruby_no_require</span><span class='lparen'>(</span><span class='id identifier rubyid_base'>base</span><span class='rparen'>)</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_require_all'>require_all</span>
<span class='id identifier rubyid_ext_manager'>ext_manager</span><span class='period'>.</span><span class='id identifier rubyid_clean_up'>clean_up</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ext_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A path to the extension.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ext_version</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A version of the extension.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>experimental</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The experimental option updates the libraries every time they are loaded.
This is useful if the library is in development.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_c_extension-instance_method">
  
    #<strong>add_c_extension</strong>(filename)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All C extension files are be copied from
<em>EXT_PATH/libraries/stage/PLATFORM + BIT/RUBY_VERSION/</em>.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Add a C extension file that must be copied/loaded.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Library filename.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_optional_library-instance_method">
  
    #<strong>add_optional_library</strong>(filename)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All dll/dylib files are copied from <em>EXT_PATH/libraries/stage/PLATFORM +
BIT/</em>.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Add a library file that will be copied/loaded in case it&#39;s there.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Library filename.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_required_library-instance_method">
  
    #<strong>add_required_library</strong>(filename)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All dll/dylib files are copied from <em>EXT_PATH/libraries/stage/PLATFORM +
BIT/</em>.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Add a library file that must be copied/loaded.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Library filename.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_ruby-instance_method">
  
    #<strong>add_ruby</strong>(filename, only_register = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All added rubies are loaded last in the order they are added.</p>
</div>
  </div>


<p>Add a Ruby file that will be required and ignored from cleanup.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Ruby filename.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_ruby_no_require-instance_method">
  
    #<strong>add_ruby_no_require</strong>(filename)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a Ruby file that will be ignored from cleanup but not required.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Ruby filename.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clean_up-instance_method">
  
    #<strong>clean_up</strong>(clean_rubies = false)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This does not erase any files from the TEMP folder, as they may be used by
other SketchUp versions.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This does not raise any errors upon failure to delete a file or a
directory.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Erase all unused libraries, c extension files, and unregistered ruby files
(if <code>clean_rubies</code> is enabled).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>clean_rubies</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to delete all unregistered Ruby files within <em>EXT_PATH</em>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="require_all-instance_method">
  
    #<strong>require_all</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>All .dll files are loaded first, in the order they are added, all .so or
.bundle files afterwards, and all ruby files last. All .dylib files are
expected to be loaded by a C extension.</p>
</div>
  </div>

<p class="note returns_void">This method returns an undefined value.</p>
<p>Copy and load all the required and optional files.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>, <tt>LoadError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if a required file doesn&#39;t exist.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>3.5.0</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jul 17 23:10:45 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.3.3).
</div>

    </div>
  </body>
</html>